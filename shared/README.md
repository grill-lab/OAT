# OAT shared files

This folder contains a variety of different types of files that need to be accessed by multiple OAT services, or that don't fit well in any single service. The contents are described in more detail in the sections below.

## Logging configuration 

```
shared/log_config.yaml
shared/utils/logger.py
shared/file_system/logs/db.log
```

The file `shared/log_config.yaml` defines a common Python logging configuration for all the services. The file defines the logging format string using the placeholders defined [here](https://docs.python.org/3/library/logging.html#logrecord-attributes). There are currently a few different loggers defined in the file, sharing the same Formatters but logging to a different destination (e.g. `console` logs to `stdout` while `file` logs to `shared/file_system/logs/db.log`). 

This configuration is loaded within each service by importing `logger` from the `utils` package. This module is implemented in `shared/utils/logger.py`.

## shared.utils package
 
```
shared/utils/*.py
```

This is a Python package containing modules that are used by different OAT services. This includes the `logger` module, methods for working with `Session` protobufs in `session.py`, and some miscellaneous helper methods in `general.py`.

## Protobufs 

```
shared/protobufs
shared/compiled_protobufs
```

The set of protobuf objects used by the OAT services are all defined in `shared/protobufs`. The compiled versions (the output of running `grpc_tools.protoc`) are generated by the `builder` container and placed into `shared/compiled_protobufs` where they can be loaded by the services. 

## Models

```
shared/models
```

Contains custom models used by the system. This currently includes:

 * domain classifier
 * question classifier
 * phase intent classifier

The folder should be populated and updated by running the `setup.sh` script.

## Task Graph 

```
shared/task_graph
```

Implementation of the `TaskGraph` class for representing and executing tasks in the system.

## Test data

```
shared/test_data
```

Various data files and scripts for testing system models. 

```
shared/test_reports
```

Output from the `test_qa.py` and `test_qa_intent_classifier.py` unit tests.

## Hand curated graphs

```
shared/hand_curated_graphs
```

TODO
